server{
	listen 8080;
	host 127.0.0.1;
	server_name example.com;
	client_max_body_size 10M;

	error_page 404 /errors/404.html;
	error_page 500 /errors/500.html;
	error_page 403 /errors/403.html;

	# Basic file serving
	location / {
		root /var/www/html;
		index index.html;
		allowed_methods GET POST;
		autoindex on;
	}

	# Static images directory
	location /images {
		root /var/www/images;
		allowed_methods GET;
		autoindex off;
	}

	# File uploads
	location /upload {
		root /var/www/uploads;
		allowed_methods POST;
		upload_store /tmp/uploads;
		client_max_body_size 20M;
	}

	# PHP handling
	location *.php {
		root /var/www/php;
		cgi_path /usr/bin/php-cgi;
		allowed_methods GET POST;
		cgi_timeout 30;
	}

	# Redirection example
	location /old {
		return 301 /new;
	}
}

# Secondary server on different port
server {
	listen 8081;
	host 127.0.0.1;
	server_name test.local;
	client_max_body_size 1M;

	location / {
		root /var/www/test;
		index main.html;
		allowed_methods GET;
		autoindex off;
	}
}

# Server with multiple ports
server {
	listen 8082 8083;
	host 127.0.0.1;
	server_name multi.local;

	location / {
		root /var/www/multi;
		allowed_methods GET POST DELETE;
		index index.html;
		autoindex on;
	}
}